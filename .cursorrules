# ğŸ“Š Reguli Cursor - AplicaÈ›ie Pulsoximetrie

## ğŸ‘¥ Echipa de Dezvoltare VirtualÄƒ (21 Membri)
Pentru fiecare task, gÃ¢ndeÈ™te ca o echipÄƒ diversÄƒ:
- 3 ArhitecÈ›i de Programare
- 3 Programatori Seniori Python/Data Science
- 3 UI/UX Seniori (Medical UX)
- 3 Manageri de Proiect
- 3 Testeri (inclusiv date medicale)
- 3 Programatori Creativi
- 3 Programatori Critici

Proces: AnalizÄƒ profundÄƒ â†’ Minim 5 soluÈ›ii â†’ Evaluare Pro/Contra â†’ Votul echipei

## ğŸ¯ Cele 11 Principii Fundamentale
1. **Claritate** - Nume descriptive, funcÈ›ii < 50 linii, zero magic numbers
2. **RobusteÈ›e** - Validare comprehensivÄƒ CSV, error handling, graceful degradation
3. **PerformanÈ›Äƒ** - Procesare eficientÄƒ date masive, caching grafice, optimizare memorie
4. **Modularitate** - Separation of Concerns: parser, generator, processor, callbacks
5. **Securitate** - Date anonimizate (fÄƒrÄƒ date personale), link-uri token-based, validare uploads
6. **Testabilitate** - Unit tests pentru parsing, integration tests pentru workflow
7. **Mentenabilitate** - Cod organizat modular, docstrings Python, configurare externÄƒ
8. **Observabilitate** - Logging structurat (logger_setup.py), metrics procesare
9. **Portabilitate** - Responsive design (Dash), mobile-friendly, multi-browser
10. **RezilienÈ›Äƒ** - Recuperare din erori CSV corupte, retry logic, fallback values
11. **EticÄƒ** - Date anonime by design, accessibility, code review, zero duplication

## ğŸ“Š Format CSV REAL (Checkme O2)

**Coloane OBLIGATORII (Ã®n RomÃ¢nÄƒ!):**
```csv
Timp,Nivel de oxigen,Puls cardiac,MiÅŸcare
20:35:10 15/10/2025,92,78,0
```

- **Timp** â†’ Format: `HH:MM:SS DD/MM/YYYY` (ex: `20:35:10 15/10/2025`)
- **Nivel de oxigen** â†’ SpO2 (%) - 0-100
- **Puls cardiac** â†’ Puls (bpm) - 30-200
- **MiÅŸcare** â†’ Indicator miÈ™care (0-25+) - opÈ›ional

**Filename Format:**
```
Checkme O2 [APARAT]_[YYYYMMDDHHMMSS].csv
Exemple: Checkme O2 0331_20251015203510.csv â†’ Aparat 0331
```

**ATENÈšIE CSV:** NU conÈ›ine Nume/Prenume/CNP/Telefon/Email/AdresÄƒ (ZERO date personale!)

## ğŸ¥ Model Date: 1 PACIENT = 1 LINK PERSISTENT

**Workflow Medical:**
1. **Medic uploadeazÄƒ BULK** (5-10 perechi CSV+PDF)
2. **Sistem afiÈ™eazÄƒ dialog**: "SelectaÈ›i pacient pentru fiecare Ã®nregistrare"
3. **Medic asociazÄƒ manual** fiecare test:
   - **OPÈšIUNE A**: CreeazÄƒ LINK NOU â†’ UUID persistent pentru pacient nou
   - **OPÈšIUNE B**: AdaugÄƒ la LINK EXISTENT â†’ SelecteazÄƒ pacient din listÄƒ
4. **MERGE LINKS**: UneÈ™te 2+ link-uri pentru acelaÈ™i pacient â†’ redirect + date Ã®n 1 link
5. **AfiÈ™are**: Fiecare test = secÈ›iune SEPARATÄ‚ (card/acordeon) - NU se amestecÄƒ datele!

**Link Persistent:** `https://app.com/view/abc123-uuid` (valid indefinit, fÄƒrÄƒ expirare)

## ğŸ”’ Privacy by Design (CRUCIAL!)

âœ… **CSV conÈ›ine DOAR**: Timp, Nivel de oxigen, Puls cardiac, MiÈ™care
âœ… **NumÄƒr aparat**: Extras din filename (string "0331", NU integer 331!)
âœ… **Token-uri UUID v4**: Random, nu predictibile
âœ… **1 link per PACIENT real**: Reutilizabil pentru teste multiple
âœ… **Titlu fÄƒrÄƒ nume**: "Ãnregistrare din MarÈ›i 15 Octombrie 2025 seara ora 20:35..."
âœ… **Metadata EXIF clean**: PNG/JPG fÄƒrÄƒ date identificabile
âœ… **Log-uri anonime**: app_activity.log fÄƒrÄƒ date personale

## ğŸ’¡ DO âœ…

- **ValideazÄƒ format romÃ¢nesc**: Coloane Ã®n ROMÃ‚NÄ‚ (`Timp`, `Nivel de oxigen`, `Puls cardiac`)
- **ParseazÄƒ timestamp**: Format `HH:MM:SS DD/MM/YYYY`
- **Extrage device number**: Regex `Checkme O2 (\d{4})_` â†’ pÄƒstreazÄƒ ca STRING ("0331")
- **Encoding UTF-8**: Pentru caractere romÃ¢neÈ™ti (Äƒ, Ã¢, Ã®, È™, È›)
- **Type hints Python**: Pentru claritate
- **Error handling**: CSV corrupt, format greÈ™it
- **Logging comprehensiv**: logger_setup.py (fÄƒrÄƒ date identificabile!)
- **Token-uri PERSISTENTE**: UUID v4, reutilizabile pentru acelaÈ™i pacient
- **Asociere manualÄƒ medic**: Link nou SAU link existent
- **AfiÈ™are multiplÄƒ**: SecÈ›iuni SEPARATE pe acelaÈ™i link (nu amestecate!)

## ğŸ’¡ DON'T âŒ

- **NU presupune coloane Ã®n englezÄƒ** (`Timp`, nu `Time`!)
- **NU converteÈ™ti numÄƒr aparat la integer** (pÄƒstreazÄƒ "0331" ca string!)
- **NU ignora encoding UTF-8** (caractere romÃ¢neÈ™ti se corup!)
- Nu hard-codezi culori/limite (foloseÈ™te config.py, colors_config.json)
- Nu folosi `print()` (doar logger)
- **NU stoca date personale** (nume, CNP Ã®n fiÈ™iere)
- **NU genera ID-uri predictibile** (UUID v4 pentru token-uri)
- **NU amesteca datele** din Ã®nregistrÄƒri diferite (afiÈ™are SEPARATÄ‚!)
- **NU È™tergi link-ul source** la merge (redirect, pentru bookmark-uri vechi)

## ğŸ“ Reguli DocumentaÈ›ie (MINIMALISM!)

âŒ **NU crea fiÈ™iere .md/.txt** decÃ¢t la cerere EXPLICITÄ‚
âœ… **RÄƒspunde direct Ã®n chat** - ExplicÄƒ concis, nu crea fiÈ™iere
âœ… **ActualizeazÄƒ fiÈ™iere existente** - Nu crea altele noi
âœ… **Docstrings Python** - Ãn cod, nu fiÈ™iere separate
âœ… **Exemple cu date anonime** - "Aparat3539", nu nume pacienÈ›i

**ExcepÈ›ii (doar la cerere):**
- README.md (dacÄƒ cerut explicit)
- Configurare (colors_config.json, requirements.txt - necesare)
- Log-uri (generat automat)

## ğŸ–¥ï¸ Specific Windows/PowerShell

âŒ **NU folosi `&&`** pentru comenzi Ã®nlÄƒnÈ›uite (nu funcÈ›ioneazÄƒ Ã®n PowerShell)
âœ… **FoloseÈ™te `;`** pentru comenzi multiple
```powershell
# CORECT:
git add . ; git commit -m "mesaj" ; git push

# GREÈ˜IT (nu funcÈ›ioneazÄƒ):
git add . && git commit -m "mesaj" && git push
```

## ğŸ§ª Testing Extensiv (Activare: "test1" sau "testeazÄƒ extensiv")

CÃ¢nd utilizatorul spune **"test1"**:
- Browser testing (Chrome, Firefox, Edge)
- Upload CSV + Bulk processing
- Link-uri persistente + Merge links
- Error scenarios (CSV greÈ™it, date invalide, encoding)
- Performance (< 2s parsing, < 3s grafice)
- Privacy audit (ZERO date personale Ã®n output)
- Validare date medicale (SaO2: 0-100, Puls: 30-200)

## ğŸ—ï¸ Stack Tehnologic

**Current (Local):**
- Framework: Dash (Python)
- Data: pandas, numpy
- Visualization: Plotly
- Export: Kaleido
- Watching: watchdog

**Future (Cloud):**
- Backend: FastAPI + Python
- Database: PostgreSQL (Neon/Supabase)
- Storage: Cloudflare R2 / MinIO
- PDF: pdfplumber / PyMuPDF
- Deploy: Railway / Render + Docker

## ğŸ¯ Target Metrics

- CSV Parsing: < 2s pentru 10,000 Ã®nregistrÄƒri
- Graph Generation: < 3s pentru 8h date
- Memory: < 500MB pentru batch processing
- Error Rate: < 0.5% (date medicale critice)
- Mobile: Grafice lizibile pe 360px width

## ğŸ“‹ Format Titlu Ãnregistrare (FÄ‚RÄ‚ nume pacient)

```
Ãnregistrare din [Zi SÄƒptÄƒmÃ¢nÄƒ] [Data] [Moment Zi] ora [HH:MM]
pÃ¢nÄƒ Ã®n [Zi SÄƒptÄƒmÃ¢nÄƒ] [Data] ora [HH:MM] [Status] - Aparat [NNNN]
```

**Moment zi (START):**
- "seara" â†’ ora â‰¥ 20:00
- "dupÄƒ ora 12" â†’ ora 12:00-19:59
- "dimineaÈ›a" â†’ ora < 12:00

**Status (END):**
- "(Ã®ntreruptÄƒ Ã®nainte de ora 12 noaptea)" â†’ dacÄƒ se terminÄƒ Ã®nainte de 00:00 a doua zi
- Nimic â†’ dacÄƒ continuÄƒ peste 00:00 (Ã®nregistrare completÄƒ)

**Exemplu:**
`Ãnregistrare din Joi 2 Mai 2025 seara ora 23:30 pÃ¢nÄƒ Ã®n Vineri 3 Mai 2025 ora 06:37 - Aparat 3539`

---

> **"Code is read 10x more than it's written"** - Scrie cod pentru urmÄƒtorul dezvoltator!
> **"Medical data is critical"** - Zero compromisuri pe validare È™i securitate!

**Versiune:** 1.0 Pulsoximetrie | Python + Dash + Plotly + pandas

